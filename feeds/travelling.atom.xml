<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>/home/adeel - travelling</title><link href="https://adl1995.github.io/" rel="alternate"></link><link href="https://adl1995.github.io/feeds/travelling.atom.xml" rel="self"></link><id>https://adl1995.github.io/</id><updated>2019-05-30T09:14:00+02:00</updated><entry><title>Programmatically organising your backpacking trip using Google My Maps</title><link href="https://adl1995.github.io/programmatically-organising-your-backpacking-trip-using-google-my-maps.html" rel="alternate"></link><published>2019-05-30T09:14:00+02:00</published><updated>2019-05-30T09:14:00+02:00</updated><author><name>Adeel Ahmad</name></author><id>tag:adl1995.github.io,2019-05-30:/programmatically-organising-your-backpacking-trip-using-google-my-maps.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;This blog post has been converted from a recent &lt;a href="https://docs.google.com/presentation/d/10NlBmnUk7qsh0nPso3Lqg8OvoP6CZg8sHJx1gllHem4/edit#slide=id.g577465d654_0_0"&gt;presentation&lt;/a&gt; I gave during the &lt;a href="https://indico.cern.ch/event/771113/overview"&gt;Thematic &lt;span class="caps"&gt;CERN&lt;/span&gt; School of Computing 2019&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;When planning a journey to a new country or a city it helps to mark down all the places you would like to visit and eventually create a travel plan for each day. I personally use Google Maps for finding places of interest including historical buildings, museums, and libraries. As an example, if I were to visit Split, Croatia I can format the query on Google Maps as “places to visit split” which will list all the attractions based on features such as reviews and popularity.&lt;/p&gt;
&lt;p align="center"&gt;
&lt;img alt="Things to do in Split" src="https://adl1995.github.io/images/google-my-maps/things-to-do-split.png" style="width:300px;"/&gt;
&lt;/p&gt;
&lt;p&gt;Although it is possible to use the “Save” feature in Google Maps, it does …&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;This blog post has been converted from a recent &lt;a href="https://docs.google.com/presentation/d/10NlBmnUk7qsh0nPso3Lqg8OvoP6CZg8sHJx1gllHem4/edit#slide=id.g577465d654_0_0"&gt;presentation&lt;/a&gt; I gave during the &lt;a href="https://indico.cern.ch/event/771113/overview"&gt;Thematic &lt;span class="caps"&gt;CERN&lt;/span&gt; School of Computing 2019&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;When planning a journey to a new country or a city it helps to mark down all the places you would like to visit and eventually create a travel plan for each day. I personally use Google Maps for finding places of interest including historical buildings, museums, and libraries. As an example, if I were to visit Split, Croatia I can format the query on Google Maps as “places to visit split” which will list all the attractions based on features such as reviews and popularity.&lt;/p&gt;
&lt;p align="center"&gt;
&lt;img alt="Things to do in Split" src="https://adl1995.github.io/images/google-my-maps/things-to-do-split.png" style="width:300px;"/&gt;
&lt;/p&gt;
&lt;p&gt;Although it is possible to use the “Save” feature in Google Maps, it does not allow customisability options including categorisation of places and marking places based on priority.&lt;/p&gt;
&lt;h3&gt;Google My Maps&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://www.google.com/mymaps"&gt;Google My Maps&lt;/a&gt; is a tool which allows creating custom maps and is useful for making travel plans, marking hiking routes, and planning other sports activities. It also allows sharing the map with other people either publicly or privately. Some of its features include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Updating the base map to satellite or street view&lt;/li&gt;
&lt;li&gt;Personalising the map by styling the icons and changing their color&lt;/li&gt;
&lt;li&gt;Importing data from a spreadsheet including &lt;span class="caps"&gt;CSV&lt;/span&gt;, &lt;span class="caps"&gt;XML&lt;/span&gt;, and &lt;span class="caps"&gt;KML&lt;/span&gt; files&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Adding a new entry&lt;/h4&gt;
&lt;p&gt;The manual process for adding a new entry involves finding a location using the search bar and then adding it to the map layer which places a waypoint icon on the base map.&lt;/p&gt;
&lt;p align="center"&gt;
&lt;img alt="Adding entry" src="https://adl1995.github.io/images/google-my-maps/adding-entry.png" style="width:500px;"/&gt;
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A layer is Google My Map’s way of categorising different topics, for example, there can be a separate layer for each city.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This, however, is a tedious and repetitive task, which can be done programmatically using Python.&lt;/p&gt;
&lt;h4&gt;Adding entries using Google Maps &lt;span class="caps"&gt;API&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;In principal, if we have a spreadsheet with a list of places, the only task left is to import these places into our custom map. Thus we require a way of automating the process of creating this spreadsheet.&lt;/p&gt;
&lt;p&gt;The Google Maps &lt;span class="caps"&gt;API&lt;/span&gt; provides an elegant way of querying data using their Places &lt;span class="caps"&gt;API&lt;/span&gt;. For example, to get a list of places to visit in Split, the request can be formatted as:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;https://maps.googleapis.com/maps/api/place/textsearch/json?query=things+to+do+split&amp;amp;language=en&amp;amp;key=API_KEY
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This returns a &lt;span class="caps"&gt;JSON&lt;/span&gt; object containing a list of places. Each record contains the place’s name and its latitude, longitude, address, icon, etc. &lt;/p&gt;
&lt;p&gt;The code block below sends a &lt;span class="caps"&gt;GET&lt;/span&gt; request to the server, and then performs four major steps including getting the &lt;code&gt;result&lt;/code&gt; object, enumerating through the places list and then writing the appropriate entries to a &lt;span class="caps"&gt;CSV&lt;/span&gt; file.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Fetch the data.&lt;/span&gt;
&lt;span class="n"&gt;places&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;'https://maps.googleapis.com/maps/api/place/textsearch/json?query={args.query}&amp;amp;language=en&amp;amp;key=API_KEY'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Convert the response to a JSON object.&lt;/span&gt;
&lt;span class="n"&gt;places&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loads&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;places&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="s1"&gt;'results'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# Note: in this case we only keep the following three columns, however, we can further populate the CSV file with the place description, its rating, etc.&lt;/span&gt;
&lt;span class="n"&gt;columns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'names'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'coordinates'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'icon'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# Write the data to a CSV file.&lt;/span&gt;
&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;'places/{query}.csv'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'w'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;out_file&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;writer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;csv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;writer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;out_file&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;delimiter&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;','&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;writer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;writerow&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;place&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;places&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;place&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'name'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;icon&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;place&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'icon'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;lat&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lng&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;place&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'geometry'&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;'location'&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;'lat'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;place&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'geometry'&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;'location'&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;'lng'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lat&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lng&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;icon&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;'{filename} -&amp;gt; {data}'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;writer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;writerow&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Invoking the script&lt;/h4&gt;
&lt;p&gt;To get a list of all places to visit in Split the script can be invoked as:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python fetch-google-maps.py &lt;span class="s2"&gt;"things to do split"&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will generate a &lt;span class="caps"&gt;CSV&lt;/span&gt; file called &lt;code&gt;Things To Do Split.csv&lt;/code&gt; in the &lt;code&gt;places&lt;/code&gt; sub-directory.&lt;/p&gt;
&lt;h4&gt;Importing the file&lt;/h4&gt;
&lt;p&gt;Google My Maps supports importing data from  &lt;span class="caps"&gt;CSV&lt;/span&gt;, &lt;span class="caps"&gt;XML&lt;/span&gt;, &lt;span class="caps"&gt;KML&lt;/span&gt;, and &lt;span class="caps"&gt;GPL&lt;/span&gt; files and then populates the map using the input data. Instead of using coordinates we can also use street addresses.&lt;/p&gt;
&lt;p&gt;To import the file, create a new layer in your custom map and use the “Import” utility. A window will pop up prompting for the file upload. Note that you will still need to do mark the appropriate columns in your &lt;span class="caps"&gt;CSV&lt;/span&gt; file which correspond to the place’s name and its coordinates.&lt;/p&gt;
&lt;p align="center"&gt;
&lt;img alt="Coordinates" src="https://adl1995.github.io/images/google-my-maps/lat-lon-prompt.png" style="width:350px;"/&gt;
&lt;img alt="Title" src="https://adl1995.github.io/images/google-my-maps/title-prompt.png" style="width:350px;"/&gt;
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: By default, if there are more than 10 items in a &lt;span class="caps"&gt;CSV&lt;/span&gt; file the tool will group them all under a single entry. To view each item separately, select the “Uniform style” option and update “group places by” dropdown to “Individual styles”.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Limitations&lt;/h3&gt;
&lt;p&gt;Although our map is now populated with the landmark icons at their correct positions, they are not styled and all have the same icon. They are also not color coded which makes it difficult to keep track of all the places to visit on a particular day and changing the icon allows quick identification, e.g. museum or library should have two distinct icons. We thus need a way to transform the map to:&lt;/p&gt;
&lt;p align="center"&gt;
&lt;img alt="Map simple" src="https://adl1995.github.io/images/google-my-maps/map-simple.png" style="width:350px;"/&gt;
&lt;img alt="Map styled" src="https://adl1995.github.io/images/google-my-maps/map-styled.png" style="width:400px;"/&gt;
&lt;/p&gt;
&lt;p&gt;I could not find a way to embed this information within the &lt;span class="caps"&gt;CSV&lt;/span&gt; file, and this step still has to be done manually.  Another limitation is that it is not possible to import multiple &lt;span class="caps"&gt;CSV&lt;/span&gt; files into a single layer, thus requiring to merge the files before importing them.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A styled map from one of my recent trips can be seen &lt;a href="https://drive.google.com/open?id=1OdZq0vA46Oi8sny75zG0Z-MNVURjCSh6&amp;amp;usp=sharing"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;References&lt;/h3&gt;
&lt;p&gt;Source code: &lt;a href="https://gist.github.com/adl1995/a66fa3532364ff87aaaec72be332abe7"&gt;https://gist.github.com/adl1995/a66fa3532364ff87aaaec72be332abe7&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Blog: &lt;a href="https://www.google.com/earth/outreach/learn/visualize-your-data-on-a-custom-map-using-google-my-maps"&gt;https://www.google.com/earth/outreach/learn/visualize-your-data-on-a-custom-map-using-google-my-maps&lt;/a&gt;&lt;/p&gt;</content></entry></feed>